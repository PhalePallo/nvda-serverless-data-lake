<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NVIDIA Serverless Data Lake Dashboard</title>
  <link rel="stylesheet" href="./assets/css/styles.css" />

  <!-- Chart.js (CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>

<body>
  <header class="container header">
    <div class="brand">
      <div class="logo" aria-hidden="true">NVDA</div>
      <div>
        <h1>NVIDIA Analytics Dashboard</h1>
        <p class="subtitle">Serverless Data Lake (S3 + Glue + Athena) • Free-tier friendly visualization</p>
      </div>
    </div>

    <div class="badges">
      <span class="badge">Athena Views</span>
      <span class="badge">Parquet Curated</span>
      <span class="badge">Partition Pruning</span>
    </div>
  </header>

  <main class="container">
    <section class="grid">
      <article class="card">
        <div class="card-header">
          <h2>Yearly Average Close</h2>
          <p class="hint">Source: <code>monthly_summary.csv</code> (Athena view export)</p>
        </div>
        <div class="chart-wrap">
          <canvas id="chartAvgCloseYear"></canvas>
        </div>
      </article>

      <article class="card">
        <div class="card-header">
          <h2>Yearly Total Volume</h2>
          <p class="hint">Source: <code>monthly_summary.csv</code></p>
        </div>
        <div class="chart-wrap">
          <canvas id="chartVolumeYear"></canvas>
        </div>
      </article>
    </section>

    <section class="grid single">
      <article class="card">
        <div class="card-header">
          <h2>Close vs 30-Day Moving Average</h2>
          <p class="hint">Source: <code>moving_avg.csv</code> (Athena view export)</p>
          <div class="controls">
            <label>
              Range
              <select id="rangeSelect">
                <option value="180">Last 180 trading days</option>
                <option value="365">Last 365 trading days</option>
                <option value="730">Last 2 years</option>
                <option value="all">All</option>
              </select>
            </label>
          </div>
        </div>
        <div class="chart-wrap tall">
          <canvas id="chartCloseSma"></canvas>
        </div>
      </article>
    </section>

    <section class="grid">
      <article class="card">
        <div class="card-header">
          <h2>Daily Returns Distribution</h2>
          <p class="hint">Source: <code>daily_returns.csv</code> (Athena view export)</p>
        </div>
        <div class="chart-wrap">
          <canvas id="chartReturnsHist"></canvas>
        </div>
      </article>

      <article class="card">
        <div class="card-header">
          <h2>Key Stats</h2>
          <p class="hint">Computed client-side from your exported CSVs</p>
        </div>

        <div class="stats">
          <div class="stat">
            <div class="label">Curated Rows</div>
            <div class="value" id="statCuratedRows">—</div>
          </div>
          <div class="stat">
            <div class="label">Rows in 2025</div>
            <div class="value" id="statRows2025">—</div>
          </div>
          <div class="stat">
            <div class="label">Latest Date</div>
            <div class="value" id="statLatestDate">—</div>
          </div>
          <div class="stat">
            <div class="label">Avg Daily Return</div>
            <div class="value" id="statAvgReturn">—</div>
          </div>
          <div class="stat">
            <div class="label">Return Volatility (Std Dev)</div>
            <div class="value" id="statVolatility">—</div>
          </div>
        </div>

        <div class="callout">
          <strong>Note:</strong> This dashboard stays free by using exported Athena query results and a static site deploy (e.g., GitHub Pages).
        </div>
      </article>
    </section>

    <footer class="footer">
      <p>
        Built from an AWS Serverless Data Lake pipeline (S3 → Glue → Athena → Parquet → Views).
        Deployed as a static dashboard for free.
      </p>
    </footer>
  </main>

  <script type="module" src="./assets/js/app.js"></script>
</body>
</html>
